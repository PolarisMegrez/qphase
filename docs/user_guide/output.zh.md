---
description: 结果与复现
---

# 结果与复现

QPhase 的设计核心之一是可复现性。每次仿真运行都会生成一个结构化的输出目录，其中不仅包含结果数据，还包含复现该结果所需的完整上下文信息。

## 目录结构

默认情况下，所有输出均存储在 `runs/` 目录下。

### 基于会话的执行

执行 `qphase run` 命令时，会启动一个新的 **会话 (Session)**。会话充当该命令中执行的所有任务的容器。

```text
runs/
└── 2025-12-31T05-23-05_281415/      # 会话目录 (时间戳 + UUID)
    ├── session_manifest.json        # 整个会话的元数据
    ├── vdp_sde/                     # 任务目录 (任务名称)
    │   ├── config_snapshot.yaml     # 该任务使用的完整配置快照
    │   ├── data.npz                 # 仿真结果 (格式取决于引擎)
    │   └── qphase.log               # 执行日志
    └── vdp_viz/                     # 下游任务目录
        ├── config_snapshot.yaml
        └── plot.png
```

## 可复现性

### 配置快照 (`config_snapshot.yaml`)

每个任务目录都包含一个 `config_snapshot.yaml` 文件。这是运行该任务时使用的 **精确** 配置，包含：
*   合并后的全局配置与任务配置。
*   解析后的插件默认值。
*   系统环境信息（QPhase 版本、Python 版本、操作系统）。

要复现某个结果，只需直接运行此快照文件：

```bash
qphase run runs/2025-12-31.../vdp_sde/config_snapshot.yaml
```

### 会话清单 (`session_manifest.json`)

会话清单跟踪会话中所有任务的状态和关系。其用途包括：
*   调试失败的任务流。
*   以编程方式分析运行历史。
*   恢复中断的会话（高级用法）。

## 数据格式

结果数据的格式取决于所使用的引擎。

*   **SDE 引擎**：通常保存为 `.npz` (NumPy 压缩归档) 或 `.h5` (HDF5) 格式，包含轨迹数据和时间点。
*   **Viz 引擎**：保存图像 (`.png`, `.pdf`) 或处理后的数据文件。

输出格式可在任务配置的引擎设置中进行调整。
